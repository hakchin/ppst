{#
  UI Component Library
  Centralized, reusable components using CSS variables for consistency.
  All styling controlled through src/input.css design tokens.
#}

{# ============================================
   LAYOUT COMPONENTS
   ============================================ #}

{# Section container with consistent spacing #}
{% macro section(id, bg_class) %}
<section id="{{ id }}" class="py-[var(--space-section-y)] {{ bg_class }}">
  <div class="container mx-auto px-[var(--container-px)] max-w-[var(--container-max-w)]">
    {{ caller() }}
  </div>
</section>
{% endmacro section %}

{# Narrow section for text-heavy content #}
{% macro section_narrow(id, bg_class) %}
<section id="{{ id }}" class="py-[var(--space-section-y)] {{ bg_class }}">
  <div class="container mx-auto px-[var(--container-px)] max-w-[var(--container-max-narrow)]">
    {{ caller() }}
  </div>
</section>
{% endmacro section_narrow %}

{# Section title - consistent across all sections #}
{% macro section_title(text) %}
<h2 class="text-3xl md:text-4xl font-bold text-gray-900 text-center mb-12">{{ text }}</h2>
{% endmacro section_title %}

{# Grid layout for cards #}
{% macro grid_container(cols_class) %}
<div class="grid grid-cols-1 md:grid-cols-2 {{ cols_class }} gap-[var(--gap-grid)]">
  {{ caller() }}
</div>
{% endmacro grid_container %}

{# ============================================
   CARD COMPONENTS
   ============================================ #}

{# Standard card #}
{% macro card() %}
<div class="bg-white rounded-[var(--radius-xl)] shadow-sm ring-1 ring-gray-200 p-[var(--space-card-p)] hover:shadow-md transition-shadow duration-[var(--transition-base)]">
  {{ caller() }}
</div>
{% endmacro card %}

{# Card title #}
{% macro card_title(text) %}
<h3 class="text-xl font-semibold text-gray-900 mb-3">{{ text }}</h3>
{% endmacro card_title %}

{# Card content text #}
{% macro card_text(text) %}
<p class="text-gray-700 leading-relaxed">{{ text }}</p>
{% endmacro card_text %}

{# ============================================
   NAVIGATION COMPONENTS
   ============================================ #}

{# Navigation link #}
{% macro nav_link(href, text) %}
<a href="{{ href }}" class="text-gray-700 hover:text-blue-600 transition-colors duration-[var(--transition-fast)] focus:ring-2 focus:ring-[var(--color-ring)] focus:ring-offset-2 rounded-[var(--radius-md)] px-3 py-2">
  {{ text }}
</a>
{% endmacro nav_link %}

{# ============================================
   FORM COMPONENTS
   ============================================ #}

{# Form field wrapper #}
{% macro field(name, label, required) %}
<div class="mb-6">
  <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
    {{ label }}
    {% if required %}
    <span class="text-[var(--color-error)]">*</span>
    {% else %}
    <span class="text-[var(--color-text-muted)]">(optional)</span>
    {% endif %}
  </label>
  {{ caller() }}
</div>
{% endmacro field %}

{# Text input #}
{% macro input(id, name, type, required, maxlength, placeholder) %}
<input
  type="{{ type }}"
  id="{{ id }}"
  name="{{ name }}"
  {% if required %}required{% endif %}
  {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
  class="w-full rounded-[var(--radius-lg)] border border-[var(--color-border)] px-[var(--input-padding-x)] py-[var(--input-padding-y)] h-[var(--input-height)] focus:ring-2 focus:ring-[var(--color-ring)] focus:border-[var(--color-border-focus)] transition-colors duration-[var(--transition-fast)]"
  placeholder="{{ placeholder }}"
>
{% endmacro input %}

{# Textarea #}
{% macro textarea(id, name, required, maxlength, rows, placeholder) %}
<textarea
  id="{{ id }}"
  name="{{ name }}"
  {% if required %}required{% endif %}
  {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
  rows="{{ rows }}"
  class="w-full rounded-[var(--radius-lg)] border border-[var(--color-border)] px-[var(--input-padding-x)] py-[var(--input-padding-y)] focus:ring-2 focus:ring-[var(--color-ring)] focus:border-[var(--color-border-focus)] transition-colors duration-[var(--transition-fast)] resize-y"
  placeholder="{{ placeholder }}"
></textarea>
{% endmacro textarea %}

{# Primary button #}
{% macro button(text, type) %}
<button
  type="{{ type }}"
  class="inline-flex items-center justify-center rounded-[var(--radius-lg)] bg-[var(--color-brand)] px-[var(--button-padding-x)] py-[var(--button-padding-y)] text-white font-semibold shadow-sm hover:bg-[var(--color-brand-hover)] focus:ring-2 focus:ring-[var(--color-ring)] focus:ring-offset-2 transition-colors duration-[var(--transition-base)] w-full"
>
  {{ text }}
</button>
{% endmacro button %}

{# Form container #}
{% macro form_container(action, hx_post, hx_target) %}
<form
  action="{{ action }}"
  method="post"
  class="bg-white rounded-[var(--radius-xl)] shadow-sm ring-1 ring-gray-200 p-8"
  {% if hx_post %}hx-post="{{ hx_post }}"{% endif %}
  {% if hx_target %}hx-target="{{ hx_target }}"{% endif %}
>
  {{ caller() }}
</form>
{% endmacro form_container %}

{# ============================================
   ALERT COMPONENTS
   ============================================ #}

{# Error alert #}
{% macro alert_error(errors) %}
<div class="bg-red-50 border border-[var(--color-error)] rounded-[var(--radius-lg)] p-4">
  <div class="flex items-start">
    <svg class="w-5 h-5 text-[var(--color-error)] mr-3 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
    </svg>
    <div class="flex-1">
      <ul class="list-none space-y-1">
        {% for error in errors %}
        <li class="text-sm text-[var(--color-error)]">{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endmacro alert_error %}

{# Success alert #}
{% macro alert_success(message) %}
<div class="bg-green-50 border border-[var(--color-success)] rounded-[var(--radius-lg)] p-4">
  <div class="flex items-center">
    <svg class="w-5 h-5 text-[var(--color-success)] mr-3" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    <p class="text-sm text-[var(--color-success)] font-medium">{{ message }}</p>
  </div>
</div>
{% endmacro alert_success %}